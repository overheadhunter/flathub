{
  "app-id": "org.standardnotes.standardnotes",
  "base": "io.atom.electron.BaseApp",
  "base-version": "18.08",
  "command": "standard-notes",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "18.08",
  "sdk": "org.freedesktop.Sdk",
  "separate-locales": false,
  "finish-args": [
    "--device=dri",
    "--filesystem=xdg-download",
    "--filesystem=xdg-documents",
    "--share=ipc",
    "--share=network",
    "--socket=x11",
    "--talk-name=org.freedesktop.Notifications",
    "--talk-name=org.freedesktop.secrets"
  ],
  "build-options": {
    "env": {
      "NPM_CONFIG_LOGLEVEL": "info"
    }
  },
  "modules": [
    {
      "name": "nodejs",
      "cleanup": [
        "/app/lib/node_modules/npm/changelogs",
        "/app/lib/node_modules/npm/doc",
        "/app/lib/node_modules/npm/html",
        "/app/lib/node_modules/npm/man",
        "/app/lib/node_modules/npm/scripts",
        "/include",
        "/share"
      ],
      "sources": [
        {
          "type": "archive",
          "sha256": "4e22d926f054150002055474e452ed6cbb85860aa7dc5422213a2002ed9791d5",
          "url": "https://nodejs.org/dist/v10.15.3/node-v10.15.3.tar.xz"
        }
      ]
    },
    {
      "name": "standard-notes",
      "buildsystem": "simple",
      "build-commands": [
        "npm install --cache=/run/build/standard-notes/npm-cache/ --nodedir=/app/include/node --offline --prefix=main",
        "mkdir -p /app/bin/ /app/main/",
        "cp -ar main/* /app/main/",
        "install -D -m0755 run.sh /app/bin/standard-notes",
        "install -D -m0644 main/build/icon/Icon-512x512.png /app/share/icons/hicolor/512x512/apps/${FLATPAK_ID}.png",
        "install -D -m0644 -t /app/share/applications/ ${FLATPAK_ID}.desktop",
        "install -D -m0644 -t /app/share/metainfo/ ${FLATPAK_ID}.appdata.xml"
      ],
      "build-options": {
        "env": {
          "electron_config_cache": "/run/build/standard-notes/npm-cache/",
          "JOBS": "max"
        }
      },
      "sources": [
        {
          "type": "file",
          "path": "org.standardnotes.standardnotes.appdata.xml"
        },
        {
          "type": "file",
          "path": "org.standardnotes.standardnotes.desktop"
        },
        {
          "type": "git",
          "commit": "a65aa3a92f4645d35be77b301b036f21db806b68",
          "dest": "main",
          "tag": "v3.0.8",
          "url": "https://github.com/standardnotes/desktop.git"
        },
        "app-generated-sources.json",
        "generated-sources.json",
        {
          "type": "script",
          "commands": ["npm start --prefix=/app/main/"],
          "dest-filename": "run.sh"
        }
      ]
    }
  ]
}
